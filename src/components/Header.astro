---
import Menu from '../assets/svg/menu.astro';
---

<header class="root" id="header">
  <nav class="nav">
    <a aria-label="Home" class="nav__logo" href=".">tanvirhosu</a>

    <button aria-label="Menubar" type="button" class="nav__menubar">
      <Menu />
    </button>

    <div class="nav__menu">
      <ul class="nav__list">
        <li class="nav__item">
          <a aria-label="Home" href="#intro" class="nav__link">#home</a>
        </li>
        <li class="nav__item">
          <a aria-label="Experience" href="#experience" class="nav__link"
            >#experience</a
          >
        </li>
        <li class="nav__item">
          <a aria-label="Education" href=" #education" class="nav__link"
            >#education</a
          >
        </li>
        <li class="nav__item">
          <a aria-label="Projects" href=" #projects" class="nav__link"
            >#projects</a
          >
        </li>
        <li class="nav__item">
          <a aria-label="Skills" href="#skills" class="nav__link">#skills</a>
        </li>
      </ul>
    </div>
  </nav>
</header>

<style>
  .root {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    overflow: hidden;
    z-index: 2;
    background-color: #ecf5ff;
  }

  .nav {
    max-width: var(--xl);
    margin-inline: auto;
    padding: 12px 15px;
    display: flex;
    justify-content: space-between;
    flex-wrap: wrap;
  }

  .nav__logo {
    margin-block: auto;
    font-family: var(--ff-tertiary);
    font-size: var(--sz-xl);
    background: var(--gradient-primary);
    -webkit-background-clip: text;
    background-clip: text;
    -webkit-text-fill-color: transparent;
    transition: transform ease-out 0.3s;
  }

  .nav__menubar svg {
    stroke: var(--co-primary);
  }
  .nav__menubar.isOpen svg {
    stroke: var(--co-secondary);
  }

  .nav__menu {
    display: none;
    flex-basis: 100%;
  }
  .nav__menu.isVisible {
    display: block;
    transition: all 0.3s cubic-bezier(0, 0.6, 0.4, 1); /* doesn't work with display */
  }

  .nav__list {
    display: flex;
    flex-direction: column;
    align-items: center;
  }

  .nav__item {
    width: 100%;
    height: 100%;
  }
  .nav__link {
    display: inline-block;
    width: 100%;
    height: 100%;
    padding-block: 12px;
    border-bottom: 1px solid var(--co-primary-smooth);
    font-size: var(--sz-sm);
    color: var(--co-secondary);
  }
  .nav__item:last-child > .nav__link {
    border-bottom: none;
    padding-bottom: 0;
  }

  @media (min-width: 768px) {
    .nav {
      padding: 15px;
    }

    .nav__logo {
      font-size: 28px;
    }

    .nav__menubar {
      display: none;
    }

    .nav__menu {
      display: flex !important;
      flex-basis: auto;
    }

    .nav__list {
      flex-direction: row;
      margin: auto;
    }

    .nav__link {
      border-bottom: none;
      font-size: var(--sz-md);
      padding: 7px 15px !important;
      transition: background-color 0.5s cubic-bezier(0.4, 0, 0.2, 1);
      border-radius: 8px;
    }
  }

  @media (min-width: 1024px) {
    .nav__logo:hover {
      transform: scale(1.1);
    }

    .nav__link:hover {
      background-color: #e4ebf9;
    }
  }
</style>

<script>
  const navMenubar = document.querySelector<HTMLElement>('.nav__menubar'),
    navMenu = document.querySelector<HTMLElement>('.nav__menu');

  // Mobile menu: event listeners
  if (navMenubar && navMenu) {
    navMenubar.addEventListener('click', () => {
      navMenu.classList.toggle('isVisible');
      navMenubar.classList.toggle('isOpen');
    });
  }

  // Mobile menu: Close on click link
  const navLinks = document.querySelectorAll('.nav__link');
  navLinks.forEach((anchor) =>
    anchor.addEventListener('click', () => {
      navMenu?.classList.remove('isVisible');
      navMenubar?.classList.remove('isOpen');
    })
  );
</script>
